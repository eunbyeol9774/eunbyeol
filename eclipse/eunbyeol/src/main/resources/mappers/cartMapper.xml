<?xml version="1.0" encoding="UTF-8"?> <!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cartMapper">

    <insert id="insertCart"> 
        insert into cart (cart_id, user_id, pid, amount)
        values (seq_cart.nextval, #{user_id}, #{pid}, #{amount} )
                 
    </insert>
    
    <select id="listCart" resultType="com.project.vo.CartVO">
    	select cart_id, p.pid, c.user_id, name, pname, amount, pprice, (pprice*amount) money
       	from member m, cart c, product p   
        where m.userid=c.user_id and c.pid=p.pid and c.user_id=#{user_id} order by cart_id
    		
    </select>
    
    <select id="sumMoney" resultType="int">
		select nvl(sum(pprice*amount),0)
        from cart c,product p
        where c.pid=p.pid and user_id=#{user_id}

    </select>
    
    <update id="modifyCart">
    	update cart 
    	set amount=#{amount}
   		where user_id=#{user_id}
   		and pid=#{pid}
    </update>
    
    <delete id="deleteCart">
    	delete from cart
    	where cart_id=#{cart_id}
    </delete>
    
  
    
    
</mapper>