<?xml version="1.0" encoding="UTF-8"?> <!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cartMapper">

    
    <select id="listCart" resultType="com.project.vo.CartVO">   	
    	select *
       	from cart
        where userid = #{userid}   
    </select>
    
    <insert id="insertCart">
    insert into cart (cart_id, userid, pid, amount)
    values(seq_cart.nextval, #{userid}, #{pid}, #{amount} )
    </insert> 
    
    <select id="sumMoney" resultType="int">
		select nvl(sum(pprice*amount),0)
        from cart c, product p
        where c.pid=p.pid and userid=#{userid}

    </select>
    
    <update id="modifyCart">
    	update cart 
    	set amount=#{amount}
   		where userid=#{userid}
   		and pid=#{pid}
   		
    </update>
    
    <delete id="deleteCart">
    	delete from cart
    	where cart_id=#{cart_id}
    </delete>
    
    <update id="updateCart">
     	update cart
     	set amount = amount + #{amount}
     	where userid=#{userid}
     	and pid=#{pid}
    </update>
    
</mapper>